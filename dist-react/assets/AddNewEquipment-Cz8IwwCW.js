import{r as q,l as F,u as E,j as e,F as D,a as t,b as r,c as a,d as i,I as c,m as b,n as o,T as N,B as p,D as I,o as S,p as T,q as w,s as A}from"./index-DcC--eh_.js";import{o as P,s as m,n as h,t as k}from"./index-B_byQC66.js";const B=P({equipmentName:m().min(2,{message:"Equipment name must be at least 2 characters."}),equipmentCode:m().min(1,{message:"Equipment code is required."}),equipmentImage:m().optional(),description:m().min(10,{message:"Description must be at least 10 characters."}),quantity:h().min(1,{message:"Quantity must be at least 1."}),price:h().min(0,{message:"Price must be a positive value."}),replacementFees:h().min(0,{message:"Replacement fees must be a positive value."}),department:m().min(1,{message:"Department is required."}),location:m().min(2,{message:"Location must be at least 2 characters."})});function R({onComplete:x,categoryId:y}){const[j,g]=q.useState(!1),[f,d]=q.useState(!1),{toast:u}=F(),s=E({resolver:k(B),defaultValues:{equipmentName:"",equipmentCode:"",equipmentImage:"",description:"",quantity:1,price:0,replacementFees:0,department:"",location:""}});async function C(n){g(!0);try{await new Promise(l=>setTimeout(l,2e3)),console.log("Adding to category:",y,n),u({title:"Equipment Added",description:"New equipment has been successfully added to the category."}),s.reset(),x()}catch{u({title:"Error",description:"Failed to add equipment",variant:"destructive"})}finally{g(!1)}}const v=()=>{s.reset(),d(!1),u({title:"Form Cancelled",description:"You have cancelled the form."}),x()};return e.jsxs(D,{...s,children:[e.jsxs("form",{onSubmit:s.handleSubmit(C),className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(t,{control:s.control,name:"equipmentName",render:({field:n})=>e.jsxs(r,{children:[e.jsx(a,{children:"Equipment Name"}),e.jsx(i,{children:e.jsx(c,{placeholder:"Enter equipment name",...n})}),e.jsx(b,{children:"Name of the equipment within the category."}),e.jsx(o,{})]})}),e.jsx(t,{control:s.control,name:"equipmentCode",render:({field:n})=>e.jsxs(r,{children:[e.jsx(a,{children:"Equipment Code"}),e.jsx(i,{children:e.jsx(c,{placeholder:"Enter equipment code",...n})}),e.jsx(o,{})]})}),e.jsx(t,{control:s.control,name:"equipmentImage",render:({field:n})=>e.jsxs(r,{children:[e.jsx(a,{children:"Equipment Image"}),e.jsx(i,{children:e.jsx(c,{id:"picture",type:"file",placeholder:"Upload equipment image",...n})}),e.jsx(o,{})]})}),e.jsx(t,{control:s.control,name:"quantity",render:({field:n})=>e.jsxs(r,{children:[e.jsx(a,{children:"Quantity"}),e.jsx(i,{children:e.jsx(c,{type:"number",placeholder:"Enter quantity",...n,onChange:l=>n.onChange(parseInt(l.target.value)),min:1})}),e.jsx(o,{})]})}),e.jsx(t,{control:s.control,name:"price",render:({field:n})=>e.jsxs(r,{children:[e.jsx(a,{children:"Price"}),e.jsx(i,{children:e.jsx(c,{type:"number",placeholder:"Enter price",...n,onChange:l=>n.onChange(parseFloat(l.target.value)),min:0,step:"0.01"})}),e.jsx(o,{})]})}),e.jsx(t,{control:s.control,name:"replacementFees",render:({field:n})=>e.jsxs(r,{children:[e.jsx(a,{children:"Replacement Fees"}),e.jsx(i,{children:e.jsx(c,{type:"number",placeholder:"Enter replacement fees",...n,onChange:l=>n.onChange(parseFloat(l.target.value)),min:0,step:"0.01"})}),e.jsx(o,{})]})}),e.jsx(t,{control:s.control,name:"description",render:({field:n})=>e.jsxs(r,{className:"col-span-1 md:col-span-2 lg:col-span-3",children:[e.jsx(a,{children:"Description"}),e.jsx(i,{children:e.jsx(N,{placeholder:"Describe the equipment",...n})}),e.jsx(b,{children:"Provide a brief description of the equipment."}),e.jsx(o,{})]})}),e.jsx(t,{control:s.control,name:"department",render:({field:n})=>e.jsxs(r,{children:[e.jsx(a,{children:"Department"}),e.jsx(i,{children:e.jsx(c,{placeholder:"Enter department",...n})}),e.jsx(o,{})]})}),e.jsx(t,{control:s.control,name:"location",render:({field:n})=>e.jsxs(r,{children:[e.jsx(a,{children:"Location"}),e.jsx(i,{children:e.jsx(c,{placeholder:"Enter location",...n})}),e.jsx(o,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{type:"submit",disabled:j,children:j?"Adding...":"Add Equipment"}),e.jsx(p,{type:"button",variant:"destructive",onClick:()=>d(!0),children:"Cancel"})]})]}),e.jsx(I,{open:f,onOpenChange:d,children:e.jsxs(S,{children:[e.jsxs(T,{children:[e.jsx(w,{children:"Confirm Cancellation"}),e.jsx("p",{children:"Are you sure you want to cancel this form? Unsaved changes will be lost."})]}),e.jsxs(A,{children:[e.jsx(p,{variant:"ghost",onClick:()=>d(!1),children:"No, Go Back"}),e.jsx(p,{variant:"destructive",onClick:v,children:"Yes, Cancel"})]})]})})]})}export{R as default};
