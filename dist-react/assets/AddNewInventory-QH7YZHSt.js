import{h as C,r as f,v as I,u as w,j as e,F as D,a as i,b as c,c as l,d,I as u,A as m,E as h,G as E,B as x,H as S,J as N,K as T,M as A,N as k,Q as M}from"./index-CevBTENx.js";import{o as P,s as j,t as B}from"./index-0j1ti5HV.js";const L=async a=>{try{return(await C.post("/inventories/",a)).data}catch(r){throw console.error("Error adding inventory:",r),r}},O=P({name:j().min(2,{message:"Inventory name must be at least 2 characters."}),description:j().min(10,{message:"Description must be at least 10 characters."}),location:j().min(2,{message:"Location must be at least 2 characters."}),manager:j().min(2,{message:"Manager name must be at least 2 characters."})});function W({onComplete:a}){const[r,y]=f.useState(!1),[v,t]=f.useState(!1),{toast:p}=I(),s=w({resolver:B(O),defaultValues:{name:"",description:"",location:"",manager:""}});async function b(n){y(!0);try{const g={name:n.name,description:n.description,location:n.location,manager:n.manager},o=await L(g);if(console.log(o),(o==null?void 0:o.status)==="success")p({title:"Inventory Added Successfully",description:`New inventory named "${n.name}" has been added successfully.`,variant:"default"}),s.reset();else throw new Error("Failed to add inventory")}catch(g){console.error("Error adding inventory:",g),p({title:"Error",description:"Failed to add inventory. Please try again.",variant:"destructive"})}finally{y(!1)}}const F=()=>{s.reset(),t(!1),p({title:"Form Cancelled",description:"You have cancelled the form."}),a&&a()};return e.jsxs(e.Fragment,{children:[e.jsxs(D,{...s,children:[e.jsxs("form",{onSubmit:s.handleSubmit(b),className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(i,{control:s.control,name:"name",render:({field:n})=>e.jsxs(c,{children:[e.jsx(l,{children:"Inventory Name"}),e.jsx(d,{children:e.jsx(u,{placeholder:"Enter inventory name",...n})}),e.jsx(m,{children:"The name of the new inventory category."}),e.jsx(h,{})]})}),e.jsx(i,{control:s.control,name:"description",render:({field:n})=>e.jsxs(c,{className:"col-span-1 md:col-span-2 lg:col-span-3",children:[e.jsx(l,{children:"Description"}),e.jsx(d,{children:e.jsx(E,{placeholder:"Describe the inventory category",...n})}),e.jsx(m,{children:"Provide a brief description of this inventory category."}),e.jsx(h,{})]})}),e.jsx(i,{control:s.control,name:"location",render:({field:n})=>e.jsxs(c,{children:[e.jsx(l,{children:"Location"}),e.jsx(d,{children:e.jsx(u,{placeholder:"Enter location",...n})}),e.jsx(m,{children:"Where is this inventory located within the rec center?"}),e.jsx(h,{})]})}),e.jsx(i,{control:s.control,name:"manager",render:({field:n})=>e.jsxs(c,{children:[e.jsx(l,{children:"Manager"}),e.jsx(d,{children:e.jsx(u,{placeholder:"Enter manager's name",...n})}),e.jsx(m,{children:"Who is responsible for managing this inventory?"}),e.jsx(h,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(x,{type:"submit",disabled:r,children:r?"Adding...":"Add Inventory"}),e.jsx(x,{type:"button",variant:"destructive",onClick:()=>t(!0),children:"Cancel"})]})]}),v&&e.jsx(S,{open:v,onOpenChange:t,children:e.jsxs(N,{children:[e.jsxs(T,{children:[e.jsx(A,{children:"Confirm Cancellation"}),e.jsx("p",{children:"Are you sure you want to cancel this form? Unsaved changes will be lost."})]}),e.jsxs(k,{children:[e.jsx(x,{variant:"ghost",onClick:()=>t(!1),children:"No, Go Back"}),e.jsx(x,{variant:"destructive",onClick:F,children:"Yes, Cancel"})]})]})})]}),e.jsx(M,{})]})}export{W as default};
