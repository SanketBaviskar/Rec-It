import{g as C,h as S,r as l,j as e,L as ne,i as le,k as ie,l as R,T as ce,O as de,W as ue,m as pe,n as me,o as ge,p as fe,q as I,R as xe,s as he,f as v,t as P,v as ve,w as ye,B as Ne,x as je,y as Ae,I as we,z as De}from"./index-CevBTENx.js";/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=C("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=C("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),Se=async t=>{try{return(await S.delete(`/equipments/${t}`)).data}catch(s){throw console.error("Error deleting equipment:",s),s}},Re=({categories:t,onAddEquipment:s,onEditEquipment:a,onDeleteEquipment:r,onDeleteCategory:n,isLoading:u=!1})=>{const[m,y]=l.useState(new Set),[x,c]=l.useState(null),[p,w]=l.useState(null),j=l.useRef(null);l.useEffect(()=>{const o=h=>{j.current&&!j.current.contains(h.target)&&c(null)};return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[]);const A=o=>{y(h=>new Set(h).has(o)?new Set([...h].filter(D=>D!==o)):new Set([...h,o]))},i=o=>{o.equipments&&o.equipments.length>0?A(o.id):w({name:o.name,id:o.id})},d=o=>{var D;const h=o.equipments&&o.equipments.length>0;return e.jsxs("div",{className:"group relative",children:[e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1.5 cursor-pointer hover:bg-accent",onClick:()=>i(o),onKeyDown:g=>g.key==="Enter"&&i(o),tabIndex:0,children:[h?e.jsx(le,{className:`h-4 w-4 transition-transform ${m.has(o.id)?"rotate-90":""}`}):e.jsx("div",{className:"w-4"}),e.jsx("span",{className:"ml-1",children:o.name}),s&&e.jsx("div",{className:"p-2 hover:bg-accent/50 rounded-sm ml-auto",onClick:g=>{g.stopPropagation(),c(x===o.id?null:o.id)},children:e.jsx(be,{className:"h-4 w-4"})})]}),x===o.id&&e.jsxs("div",{ref:j,className:"absolute left-full top-0 ml-1 z-10 bg-white shadow-lg rounded-md p-2 border min-w-[200px]",children:[e.jsx("div",{className:"px-4 py-2 hover:bg-gray-100 rounded-md cursor-pointer text-sm",onClick:()=>{s==null||s(o.id,o.name),c(null)},children:"Add Equipment"}),n&&e.jsx("div",{className:"px-4 py-2 hover:bg-gray-100 rounded-md cursor-pointer text-sm text-destructive font-medium",onClick:()=>{n(o.id),c(null)},children:"Delete Inventory"})]}),m.has(o.id)&&h&&e.jsx("div",{className:"ml-4",children:(D=o.equipments)==null?void 0:D.map(g=>e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1.5 hover:bg-accent cursor-pointer group",onClick:()=>a==null?void 0:a(g.id),children:[e.jsx("span",{className:"ml-4 flex-1",children:g.name}),e.jsx("button",{className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-accent/50 rounded-sm",onClick:async oe=>{oe.stopPropagation();try{await Se(g.id),r==null||r(g.id)}catch(re){console.error("Failed to delete equipment:",re)}},children:e.jsx(Ce,{className:"h-4 w-4"})})]},g.id))})]},o.id)};return e.jsxs("div",{className:"space-y-1",role:"tree",children:[p&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-md w-full",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Category Details"}),e.jsxs("p",{className:"font-medium",children:["Name: ",p.name]}),e.jsxs("p",{className:"font-medium",children:["ID: ",p.id]}),e.jsx("button",{onClick:()=>w(null),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Close"})]})}),u?e.jsxs("div",{className:"p-2 text-sm flex items-center gap-2",children:[e.jsx(ne,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Loading categories..."})]}):t.length>0?t.map(d):e.jsx("p",{className:"text-sm px-2",children:"No categories available"})]})},Ie=async t=>{try{return(await S.delete(`/inventories/${t}`)).data}catch(s){throw console.error("Error deleting inventory:",s),s}};function b(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function Pe(...t){return s=>{let a=!1;const r=t.map(n=>{const u=b(n,s);return!a&&typeof u=="function"&&(a=!0),u});if(a)return()=>{for(let n=0;n<r.length;n++){const u=r[n];typeof u=="function"?u():b(t[n],null)}}}}function _(...t){return l.useCallback(Pe(...t),t)}function _e(t,s,{checkForDefaultPrevented:a=!0}={}){return function(n){if(t==null||t(n),a===!1||!n.defaultPrevented)return s==null?void 0:s(n)}}var k="AlertDialog",[ke,Ye]=ie(k,[R]),f=R(),T=t=>{const{__scopeAlertDialog:s,...a}=t,r=f(s);return e.jsx(xe,{...r,...a,modal:!0})};T.displayName=k;var Te="AlertDialogTrigger",Oe=l.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...r}=t,n=f(a);return e.jsx(ce,{...n,...r,ref:s})});Oe.displayName=Te;var Me="AlertDialogPortal",O=t=>{const{__scopeAlertDialog:s,...a}=t,r=f(s);return e.jsx(he,{...r,...a})};O.displayName=Me;var Ee="AlertDialogOverlay",M=l.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...r}=t,n=f(a);return e.jsx(de,{...n,...r,ref:s})});M.displayName=Ee;var N="AlertDialogContent",[$e,Le]=ke(N),E=l.forwardRef((t,s)=>{const{__scopeAlertDialog:a,children:r,...n}=t,u=f(a),m=l.useRef(null),y=_(s,m),x=l.useRef(null);return e.jsx(ue,{contentName:N,titleName:$,docsSlug:"alert-dialog",children:e.jsx($e,{scope:a,cancelRef:x,children:e.jsxs(pe,{role:"alertdialog",...u,...n,ref:y,onOpenAutoFocus:_e(n.onOpenAutoFocus,c=>{var p;c.preventDefault(),(p=x.current)==null||p.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[e.jsx(me,{children:r}),e.jsx(ze,{contentRef:m})]})})})});E.displayName=N;var $="AlertDialogTitle",L=l.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...r}=t,n=f(a);return e.jsx(ge,{...n,...r,ref:s})});L.displayName=$;var F="AlertDialogDescription",z=l.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...r}=t,n=f(a);return e.jsx(fe,{...n,...r,ref:s})});z.displayName=F;var Fe="AlertDialogAction",V=l.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...r}=t,n=f(a);return e.jsx(I,{...n,...r,ref:s})});V.displayName=Fe;var W="AlertDialogCancel",B=l.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...r}=t,{cancelRef:n}=Le(W,a),u=f(a),m=_(s,n);return e.jsx(I,{...u,...r,ref:m})});B.displayName=W;var ze=({contentRef:t})=>{const s=`\`${N}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${N}\` by passing a \`${F}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${N}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return l.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(s)},[s,t]),null},Ve=T,We=O,G=M,Q=E,Y=V,q=B,K=L,J=z;const Be=Ve,Ge=We,U=l.forwardRef(({className:t,...s},a)=>e.jsx(G,{className:v("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:a}));U.displayName=G.displayName;const X=l.forwardRef(({className:t,...s},a)=>e.jsxs(Ge,{children:[e.jsx(U,{}),e.jsx(Q,{ref:a,className:v("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s})]}));X.displayName=Q.displayName;const Z=({className:t,...s})=>e.jsx("div",{className:v("flex flex-col space-y-2 text-center sm:text-left",t),...s});Z.displayName="AlertDialogHeader";const H=({className:t,...s})=>e.jsx("div",{className:v("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});H.displayName="AlertDialogFooter";const ee=l.forwardRef(({className:t,...s},a)=>e.jsx(K,{ref:a,className:v("text-lg font-semibold",t),...s}));ee.displayName=K.displayName;const te=l.forwardRef(({className:t,...s},a)=>e.jsx(J,{ref:a,className:v("text-sm text-muted-foreground",t),...s}));te.displayName=J.displayName;const se=l.forwardRef(({className:t,...s},a)=>e.jsx(Y,{ref:a,className:v(P(),t),...s}));se.displayName=Y.displayName;const ae=l.forwardRef(({className:t,...s},a)=>e.jsx(q,{ref:a,className:v(P({variant:"outline"}),"mt-2 sm:mt-0",t),...s}));ae.displayName=q.displayName;function qe(){const{toast:t}=ve(),[s,a]=l.useState(null),[r,n]=l.useState({}),[u,m]=l.useState(""),[y,x]=l.useState([]),[c,p]=l.useState(null),w=i=>{console.log("Selected category ID:",i),console.log("seleted category name:",y.find(d=>d.id==i).name)};l.useEffect(()=>{A()},[]);const j=async()=>{var i,d;if(c)try{const o=await Ie(c);t({title:o.status==="success"?"Success":"Error",description:o.message||"Inventory deleted successfully",variant:o.status==="success"?"default":"destructive"}),await A()}catch(o){t({title:"Error",description:((d=(i=o.response)==null?void 0:i.data)==null?void 0:d.message)||"Failed to delete inventory",variant:"destructive"}),console.error("Delete inventory error:",o)}finally{p(null)}},A=async()=>{var i;try{const d=await ye({ts:Date.now()});d.status==="success"&&x(((i=d.data)==null?void 0:i.items)||[])}catch(d){console.error("Error loading categories:",d),x([])}};return e.jsxs("div",{className:"flex h-full",children:[e.jsxs("div",{className:"w-64 border-r bg-background p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("div",{className:"font-semibold",children:"Inventory List"}),e.jsx(Ne,{variant:"outline",size:"icon",onClick:()=>a("AddNewInventoryForm"),"aria-label":"Add New Inventory",children:e.jsx(je,{className:"h-4 w-4"})})]}),e.jsx(Re,{categories:y,onCategorySelect:w,onAddEquipment:(i,d)=>{a("AddNewEquipmentForm"),n({categoryId:i,catagoryName:d}),console.log(i,"on Add equipment"),console.log(d,"on Add equipment")},onDeleteCategory:i=>p(i)})]}),e.jsxs("div",{className:"flex-1 p-6 h-full overflow-hidden",children:[!s&&e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("div",{className:"relative w-96",children:[e.jsx(Ae,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(we,{placeholder:"Search equipment...",className:"pl-8",value:u,onChange:i=>m(i.target.value)})]})}),e.jsx("div",{className:"h-full overflow-y-auto",children:s?e.jsx(De,{activeComponent:s,componentProps:{onComplete:()=>{a(null),A()},categoryId:r.categoryId,categoryName:r.catagoryName}}):e.jsx("p",{className:"text-center text-muted-foreground",children:"Welcome to Inventory Management. Please select an action."})})]}),e.jsx(Be,{open:!!c,children:e.jsxs(X,{children:[e.jsxs(Z,{children:[e.jsx(ee,{children:"Are you absolutely sure?"}),e.jsx(te,{children:"This action cannot be undone. This will permanently delete the inventory and remove all associated equipment."})]}),e.jsxs(H,{children:[e.jsx(ae,{onClick:()=>p(null),children:"Cancel"}),e.jsx(se,{onClick:j,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete Inventory"})]})]})})]})}export{qe as default};
