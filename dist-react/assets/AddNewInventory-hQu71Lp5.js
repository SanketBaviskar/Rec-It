import{k as O,r as i,l as P,u as M,j as e,F as A,a as c,b as l,c as d,d as h,I as g,m,n as x,T as B,B as t,D as C,o as F,p as S,q as I,s as D}from"./index-By-M4bTe.js";import{o as L,s as p,t as W}from"./index-DtqNpb_B.js";const Y=async r=>{try{return(await O.post("/inventories/",r)).data}catch(a){throw console.error("Error adding inventory:",a),a}},q=L({name:p().min(2,{message:"Inventory name must be at least 2 characters."}),description:p().min(10,{message:"Description must be at least 10 characters."}),location:p().min(2,{message:"Location must be at least 2 characters."}),manager:p().min(2,{message:"Manager name must be at least 2 characters."})});function R({onComplete:r}){const[a,y]=i.useState(!1),[f,o]=i.useState(!1),[E,j]=i.useState(!1),[w,T]=i.useState(""),{toast:v}=P(),n=M({resolver:W(q),defaultValues:{name:"",description:"",location:"",manager:""}});async function k(s){y(!0);try{const u={name:s.name,description:s.description,location:s.location,manager:s.manager,isInventory:!0},b=await Y(u);console.log(b),T(b.message||"Inventory created successfully"),j(!0),n.reset(),r&&r()}catch(u){console.error("Error adding inventory:",u),v({title:"Error",description:"Failed to add inventory. Please try again.",variant:"destructive"})}finally{y(!1)}}const N=()=>{n.reset(),o(!1),v({title:"Form Cancelled",description:"You have cancelled the form."}),r&&r()};return e.jsxs(A,{...n,children:[e.jsxs("form",{onSubmit:n.handleSubmit(k),className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(c,{control:n.control,name:"name",render:({field:s})=>e.jsxs(l,{children:[e.jsx(d,{children:"Inventory Name"}),e.jsx(h,{children:e.jsx(g,{placeholder:"Enter inventory name",...s})}),e.jsx(m,{children:"The name of the new inventory category."}),e.jsx(x,{})]})}),e.jsx(c,{control:n.control,name:"description",render:({field:s})=>e.jsxs(l,{className:"col-span-1 md:col-span-2 lg:col-span-3",children:[e.jsx(d,{children:"Description"}),e.jsx(h,{children:e.jsx(B,{placeholder:"Describe the inventory category",...s})}),e.jsx(m,{children:"Provide a brief description of this inventory category."}),e.jsx(x,{})]})}),e.jsx(c,{control:n.control,name:"location",render:({field:s})=>e.jsxs(l,{children:[e.jsx(d,{children:"Location"}),e.jsx(h,{children:e.jsx(g,{placeholder:"Enter location",...s})}),e.jsx(m,{children:"Where is this inventory located within the rec center?"}),e.jsx(x,{})]})}),e.jsx(c,{control:n.control,name:"manager",render:({field:s})=>e.jsxs(l,{children:[e.jsx(d,{children:"Manager"}),e.jsx(h,{children:e.jsx(g,{placeholder:"Enter manager's name",...s})}),e.jsx(m,{children:"Who is responsible for managing this inventory?"}),e.jsx(x,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(t,{type:"submit",disabled:a,children:a?"Adding...":"Add Inventory"}),e.jsx(t,{type:"button",variant:"destructive",onClick:()=>o(!0),children:"Cancel"})]})]}),e.jsx(C,{open:E,onOpenChange:j,children:e.jsxs(F,{children:[e.jsx(S,{children:e.jsx(I,{children:"Success"})}),e.jsx("p",{children:w}),e.jsx(D,{children:e.jsx(t,{onClick:()=>j(!1),children:"Close"})})]})}),f&&e.jsx(C,{open:f,onOpenChange:o,children:e.jsxs(F,{children:[e.jsxs(S,{children:[e.jsx(I,{children:"Confirm Cancellation"}),e.jsx("p",{children:"Are you sure you want to cancel this form? Unsaved changes will be lost."})]}),e.jsxs(D,{children:[e.jsx(t,{variant:"ghost",onClick:()=>o(!1),children:"No, Go Back"}),e.jsx(t,{variant:"destructive",onClick:N,children:"Yes, Cancel"})]})]})})]})}export{R as default};
