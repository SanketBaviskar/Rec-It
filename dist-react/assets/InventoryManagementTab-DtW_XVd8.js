import{f as g,r as n,j as e,L as N,g as b,B as w,h as C,S as y,I as S,R as k,i as I}from"./index-By-M4bTe.js";/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=g("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),L=({categories:i,onAddEquipment:r,isLoading:x=!1})=>{const[d,h]=n.useState(new Set),[m,c]=n.useState(null),[l,o]=n.useState(null),a=n.useRef(null);n.useEffect(()=>{const s=t=>{a.current&&!a.current.contains(t.target)&&c(null)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]);const j=s=>{h(t=>new Set(t).has(s)?new Set([...t].filter(u=>u!==s)):new Set([...t,s]))},p=s=>{var t;(t=s.subCategories)!=null&&t.length?j(s.id):o({name:s.name,id:s.id})},v=s=>{var u;const t=s.subCategories&&s.subCategories.length>0;return e.jsxs("div",{className:"group relative",children:[e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1.5 cursor-pointer hover:bg-accent",onClick:()=>p(s),onKeyDown:f=>f.key==="Enter"&&p(s),tabIndex:0,children:[t?e.jsx(b,{className:`h-4 w-4 transition-transform ${d.has(s.id)?"rotate-90":""}`}):e.jsx("div",{className:"w-4"}),e.jsx("span",{className:"ml-1",children:s.name}),t&&e.jsx("div",{className:"p-2 hover:bg-accent/50 rounded-sm ml-auto",onClick:f=>{f.stopPropagation(),c(m===s.id?null:s.id)},children:e.jsx(E,{className:"h-4 w-4"})})]}),m===s.id&&e.jsx("div",{ref:a,className:"absolute left-full top-0 ml-1 z-10 bg-white shadow-lg rounded-md p-2 border min-w-[200px]",children:e.jsx("div",{className:"px-4 py-2 hover:bg-gray-100 rounded-md cursor-pointer text-sm",onClick:()=>{r==null||r(s.id),c(null)},children:"Add Equipment"})}),d.has(s.id)&&t&&e.jsx("div",{className:"ml-4",children:(u=s.subCategories)==null?void 0:u.map(v)})]},s.id)};return e.jsxs("div",{className:"space-y-1",role:"tree",children:[l&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-md w-full",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Category Details"}),e.jsxs("p",{className:"font-medium",children:["Name: ",l.name]}),e.jsxs("p",{className:"font-medium",children:["ID: ",l.id]}),e.jsx("button",{onClick:()=>o(null),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Close"})]})}),x?e.jsx("div",{className:"p-2 text-sm",children:e.jsx(N,{className:"h-4 w-4 animate-spin"})}):i.length>0?i.map(v):e.jsx("p",{className:"text-sm px-2",children:"No categories available"})]})};function A(){const[i,r]=n.useState(null),[x,d]=n.useState(""),[h,m]=n.useState([]),c=l=>{console.log("Selected category ID:",l)};return n.useEffect(()=>{(async()=>{var o;try{const a=await I();a.status==="success"&&((o=a.data)!=null&&o.items)&&m(a.data.items)}catch(a){console.error("Error loading categories:",a)}})()},[]),e.jsxs("div",{className:"flex h-full",children:[e.jsxs("div",{className:"w-64 border-r bg-background p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("div",{className:"font-semibold",children:"Inventory List"}),e.jsx(w,{variant:"outline",size:"icon",onClick:()=>r("AddNewInventoryForm"),"aria-label":"Add New Inventory",children:e.jsx(C,{className:"h-4 w-4"})})]}),e.jsx(L,{categories:h,onCategorySelect:c,onAddEquipment:()=>r("AddNewEquipmentForm")})]}),e.jsxs("div",{className:"flex-1 p-6 h-full overflow-hidden",children:[!i&&e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("div",{className:"relative w-96",children:[e.jsx(y,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(S,{placeholder:"Search equipment...",className:"pl-8",value:x,onChange:l=>d(l.target.value)})]})}),e.jsx("div",{className:"h-full overflow-y-auto",children:i?e.jsx(k,{activeComponent:i}):e.jsx("p",{className:"text-center text-muted-foreground",children:"Welcome to Inventory Management. Please select an action."})})]})]})}export{A as default};
