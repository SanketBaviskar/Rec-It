import{u as E,j as e,F as P,a as u,b as g,V as d,d as b,I as C,E as f,e as H,G as I,B as N,r as w,H as k,X as O,x as V,J as B,K as G,M as L,Y,Z as $,_ as T,$ as m,a0 as z,a1 as x,a2 as R,a3 as q}from"./index-bC756Pjy.js";import{o as M,s as h,n as y,a as v,e as A,t as J}from"./index-LAbyUkC8.js";const F=["Student","AHEC Affiliate","GT34","Senior","Adult","Youth"],K=M({name:h().min(2,"Name must be at least 2 characters"),description:h().min(10,"Description must be at least 10 characters"),introDate:h().date(),maxMembers:y().nullable(),categories:v(M({name:A(F),price:y().min(0,"Price must be positive")})).nonempty("Select at least one category")});function U({initialData:p,onSubmit:c,onCancel:j}){const r=E({resolver:J(K),defaultValues:p||{name:"",description:"",introDate:new Date().toISOString().split("T")[0],maxMembers:null,categories:[]}}),n=r.watch("categories"),i=s=>{c(s),r.reset()};return e.jsx(P,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(i),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(u,{control:r.control,name:"name",render:({field:s})=>e.jsxs(g,{children:[e.jsx(d,{children:"Membership Name"}),e.jsx(b,{children:e.jsx(C,{...s,placeholder:"e.g., Premium Membership"})}),e.jsx(f,{})]})}),e.jsx(u,{control:r.control,name:"introDate",render:({field:s})=>e.jsxs(g,{children:[e.jsx(d,{children:"Introduction Date"}),e.jsx(b,{children:e.jsx(C,{type:"date",...s})}),e.jsx(f,{})]})}),e.jsx(u,{control:r.control,name:"maxMembers",render:({field:s})=>e.jsxs(g,{children:[e.jsx(d,{children:"Member Limit (Optional)"}),e.jsx(b,{children:e.jsx(C,{type:"number",...s,value:s.value??"",onChange:t=>s.onChange(t.target.value===""?null:Number(t.target.value)),placeholder:"Unlimited"})}),e.jsx(f,{})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(d,{children:"Category Pricing *"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:F.map(s=>e.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg",children:[e.jsx(H,{checked:n.some(t=>t.name===s),onCheckedChange:t=>{const o=r.getValues("categories");t?r.setValue("categories",[...o,{name:s,price:0}]):r.setValue("categories",o.filter(D=>D.name!==s))}}),e.jsxs("div",{className:"flex-1",children:[e.jsx(d,{children:s}),n.some(t=>t.name===s)&&e.jsx(u,{control:r.control,name:`categories.${n.findIndex(t=>t.name===s)}.price`,render:({field:t})=>e.jsxs(g,{className:"mt-2",children:[e.jsx(b,{children:e.jsx(C,{type:"number",step:"0.01",...t,onChange:o=>t.onChange(Number(o.target.value)),placeholder:"Enter price"})}),e.jsx(f,{})]})})]})]},s))}),r.formState.errors.categories&&e.jsx("p",{className:"text-sm font-medium text-destructive",children:r.formState.errors.categories.message})]}),e.jsx(u,{control:r.control,name:"description",render:({field:s})=>e.jsxs(g,{children:[e.jsx(d,{children:"Description"}),e.jsx(b,{children:e.jsx(I,{...s,className:"min-h-[100px]",placeholder:"Describe the membership benefits and features"})}),e.jsx(f,{})]})}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(N,{type:"button",variant:"outline",onClick:j,children:"Cancel"}),e.jsx(N,{type:"submit",children:p?"Save Changes":"Create Membership"})]})]})})}const _=M({name:h(),description:h(),introDate:h(),maxMembers:y().nullable(),categories:v(M({name:A(["Student","AHEC Affiliate","GT34","Senior","Adult","Youth"]),price:y()})).min(1)}),Q=["Student","AHEC Affiliate","GT34","Senior","Adult","Youth"],W=({onComplete:p})=>{const[c,j]=w.useState([{id:"1",name:"Basic Monthly",accessCategories:["Adult","Senior"],pricePerMonth:29.99,introDate:"2023-01-01",maxMembers:null,description:"Access to basic facilities"},{id:"2",name:"Student Semester",accessCategories:["Student"],pricePerMonth:24.99,introDate:"2023-08-15",maxMembers:1e3,description:"Discounted rate for students"}]),[r,n]=w.useState(!1),[i,s]=w.useState(null),t=a=>{const l={id:(i==null?void 0:i.id)||Date.now().toString(),name:a.name,accessCategories:a.categories.map(S=>S.name),pricePerMonth:a.categories[0].price,introDate:a.introDate,maxMembers:a.maxMembers,description:a.description};j(i?c.map(S=>S.id===i.id?l:S):[...c,l]),n(!1),s(null),p()},o=a=>{s(a),n(!0)},D=a=>{window.confirm("Are you sure you want to delete this membership type?")&&(j(c.filter(l=>l.id!==a)),p())};return e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6 gap-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Membership Management"}),e.jsxs(k,{open:r,onOpenChange:n,children:[e.jsx(O,{asChild:!0,children:e.jsxs(N,{className:"sm:w-auto w-full",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Add Membership Type"]})}),e.jsxs(B,{className:"sm:max-w-[700px]",children:[e.jsx(G,{children:e.jsx(L,{className:"text-lg font-semibold",children:i?"Edit Membership":"Create New Membership"})}),e.jsx(U,{onSubmit:t,onCancel:()=>{n(!1),s(null)}})]})]})]}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs(Y,{children:[e.jsx($,{className:"bg-gray-50",children:e.jsxs(T,{children:[e.jsx(m,{className:"w-[200px]",children:"Membership"}),e.jsx(m,{children:"Access"}),e.jsx(m,{children:"Price"}),e.jsx(m,{children:"Since"}),e.jsx(m,{children:"Limit"}),e.jsx(m,{className:"w-[150px]",children:"Actions"})]})}),e.jsx(z,{children:c.map(a=>e.jsxs(T,{className:"hover:bg-gray-50",children:[e.jsx(x,{className:"font-medium",children:a.name}),e.jsx(x,{children:e.jsx("div",{className:"flex flex-wrap gap-1",children:a.accessCategories.map(l=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:l},l))})}),e.jsxs(x,{children:["$",a.pricePerMonth.toFixed(2)]}),e.jsx(x,{children:new Date(a.introDate).toLocaleDateString()}),e.jsx(x,{children:a.maxMembers||"âˆž"}),e.jsx(x,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>o(a),className:"hover:bg-gray-100",children:e.jsx(R,{className:"w-4 h-4"})}),e.jsx(N,{variant:"destructive",size:"sm",onClick:()=>D(a.id),className:"hover:bg-red-600",children:e.jsx(q,{className:"w-4 h-4"})})]})})]},a.id))})]})})]})};export{Q as allAccessCategories,W as default,_ as formSchema};
