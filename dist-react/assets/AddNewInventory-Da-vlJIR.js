import{i as C,r as f,v as I,u as w,j as e,F as D,a as o,b as i,c,d as l,I as u,A as d,E as m,G as E,B as h,H as S,J as N,K as T,M as A,N as k,Q as M}from"./index-bC756Pjy.js";import{o as P,s as x,t as B}from"./index-LAbyUkC8.js";const L=async a=>{try{return(await C.post("/inventories/",a)).data}catch(r){throw console.error("Error adding inventory:",r),r}},O=P({name:x().min(2,{message:"Inventory name must be at least 2 characters."}),description:x().min(10,{message:"Description must be at least 10 characters."}),location:x().min(2,{message:"Location must be at least 2 characters."}),manager:x().min(2,{message:"Manager name must be at least 2 characters."})});function W({onComplete:a}){const[r,y]=f.useState(!1),[v,t]=f.useState(!1),{toast:j}=I(),s=w({resolver:B(O),defaultValues:{name:"",description:"",location:"",manager:""}});async function b(n){y(!0);try{const p={name:n.name,description:n.description,location:n.location,manager:n.manager},g=await L(p);if((g==null?void 0:g.status)==="success")j({title:"Inventory Added Successfully",description:`New inventory named "${n.name}" has been added successfully.`,variant:"default"}),s.reset();else throw new Error("Failed to add inventory")}catch(p){console.error("Error adding inventory:",p),j({title:"Error",description:"Failed to add inventory. Please try again.",variant:"destructive"})}finally{y(!1)}}const F=()=>{s.reset(),t(!1),j({title:"Form Cancelled",description:"You have cancelled the form."}),a&&a()};return e.jsxs(e.Fragment,{children:[e.jsxs(D,{...s,children:[e.jsxs("form",{onSubmit:s.handleSubmit(b),className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(o,{control:s.control,name:"name",render:({field:n})=>e.jsxs(i,{children:[e.jsx(c,{children:"Inventory Name"}),e.jsx(l,{children:e.jsx(u,{placeholder:"Enter inventory name",...n})}),e.jsx(d,{children:"The name of the new inventory category."}),e.jsx(m,{})]})}),e.jsx(o,{control:s.control,name:"description",render:({field:n})=>e.jsxs(i,{className:"col-span-1 md:col-span-2 lg:col-span-3",children:[e.jsx(c,{children:"Description"}),e.jsx(l,{children:e.jsx(E,{placeholder:"Describe the inventory category",...n})}),e.jsx(d,{children:"Provide a brief description of this inventory category."}),e.jsx(m,{})]})}),e.jsx(o,{control:s.control,name:"location",render:({field:n})=>e.jsxs(i,{children:[e.jsx(c,{children:"Location"}),e.jsx(l,{children:e.jsx(u,{placeholder:"Enter location",...n})}),e.jsx(d,{children:"Where is this inventory located within the rec center?"}),e.jsx(m,{})]})}),e.jsx(o,{control:s.control,name:"manager",render:({field:n})=>e.jsxs(i,{children:[e.jsx(c,{children:"Manager"}),e.jsx(l,{children:e.jsx(u,{placeholder:"Enter manager's name",...n})}),e.jsx(d,{children:"Who is responsible for managing this inventory?"}),e.jsx(m,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(h,{type:"submit",disabled:r,children:r?"Adding...":"Add Inventory"}),e.jsx(h,{type:"button",variant:"destructive",onClick:()=>t(!0),children:"Cancel"})]})]}),v&&e.jsx(S,{open:v,onOpenChange:t,children:e.jsxs(N,{children:[e.jsxs(T,{children:[e.jsx(A,{children:"Confirm Cancellation"}),e.jsx("p",{children:"Are you sure you want to cancel this form? Unsaved changes will be lost."})]}),e.jsxs(k,{children:[e.jsx(h,{variant:"ghost",onClick:()=>t(!1),children:"No, Go Back"}),e.jsx(h,{variant:"destructive",onClick:F,children:"Yes, Cancel"})]})]})})]}),e.jsx(M,{})]})}export{W as default};
